import{_ as N,j as u,b as P,u as E,c as F,s as M,v as T,r as d,o as s,d as n,e as r,f as e,w,g,F as j,l as q,q as b,t as L,n as D,p as H,h as R}from"../assets/index.js";import{p as U,c as $}from"./api.js";import{I as A}from"./IconBtn.js";import{L as G}from"./local.js";import"./SvgIcon.js";const J=_=>(H("data-v-1106b1f9"),_=_(),R(),_),K={class:"col",style:{width:"98%",height:"100%",margin:"0 auto"}},O={class:"row-between",style:{height:"40px",width:"100%"}},Q={class:"row",style:{width:"10%","align-items":"center",margin:"auto"}},W={class:"col fill",style:{"border-radius":"0.3rem"}},X={class:"loadMore row"},Y={class:"row",style:{margin:"auto"}},Z={key:0,class:"rotate"},ee={key:2,style:{margin:"auto"}},te=J(()=>r("div",{style:{height:"3rem"}},null,-1)),oe={__name:"Log",setup(_){const o=new G({clear:{zh:"清空日志",en:"clear logs"},load:{zh:"点击加载",en:"click to load"},no:{zh:"没有日志",en:"no logs"}},!0);o.tlp.bind(o),o.tlf.bind(o);const h=o.tl.bind(o),k=u(null),f=u(!1),v=u(!1),i=u("info"),x=P();let p=E();const c=u([]);let V=F(()=>p.state.windowHeight-60);M(i,(l,a)=>{c.value=[],m()}),T(()=>{if(!p.state.curPlugin.id){x.push("/");return}m()});function m(){let l=p.state.curPlugin.id;f.value=!0;let a=300;U({id:l,level:i.value,index:c.value.length}).then(t=>{if(!t.length){v.value=!0;return}setTimeout(()=>{c.value.push(...t)},a)}).finally(()=>{setTimeout(()=>{f.value=!1},a)})}function z(){let l=p.state.curPlugin.id;c.value=[],$({id:l,level:i.value}).then(m)}return(l,a)=>{const t=d("el-radio-button"),I=d("el-radio-group"),S=d("Loading"),C=d("el-icon"),B=d("el-scrollbar");return s(),n("div",K,[r("div",O,[e(I,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=y=>i.value=y),size:"small",style:{width:"90%",margin:"1% auto"}},{default:w(()=>[e(t,{name:"info",label:"info"}),e(t,{name:"debug",label:"debug"}),e(t,{name:"error",label:"error"}),e(t,{name:"warn",label:"warn"})]),_:1},8,["modelValue"]),r("div",Q,[e(A,{style:{margin:"auto"},size:1.5,name:"clear",color:"#f6dd65",onClick:z,prompt:g(h)("clear")},null,8,["prompt"])])]),e(B,{ref_key:"scroller",ref:k,always:"",id:"wrap",style:D(`height:${g(V)}px`),class:"logView"},{default:w(()=>[r("div",W,[(s(!0),n(j,null,q(c.value,y=>(s(),n("span",null,L(y),1))),256)),r("div",X,[r("div",Y,[f.value?(s(),n("span",Z,[e(C,null,{default:w(()=>[e(S)]),_:1})])):b("",!0),v.value?b("",!0):(s(),n("span",{key:1,onClick:m,style:{margin:"auto"}},L(g(h)("load")),1)),v.value?(s(),n("span",ee,L(g(h)("no")),1)):b("",!0)])])]),te]),_:1},8,["style"])])}}},ie=N(oe,[["__scopeId","data-v-1106b1f9"]]);export{ie as default};

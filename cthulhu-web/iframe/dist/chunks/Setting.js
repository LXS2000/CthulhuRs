import{I as B}from"./IconBtn.js";import{_ as j,j as w,r as g,o as t,k,w as L,d as n,l as N,F as C,q as b,e as c,t as p,g as U,f as _,n as O,v as F,z as K,A as q}from"../assets/index.js";import{u as E,h as M}from"./api.js";import{L as A}from"./local.js";import"./SvgIcon.js";const P={key:0,class:"row",style:{width:"100%"}},G={key:0,class:"dot"},H={class:"name"},J={class:"val"},Q={key:3,class:"col list"},R={class:"row",style:{"margin-bottom":"0.3rem"}},T={class:"row list-item"},W={style:{width:"5%",color:"gray","font-size":"0.7rem",margin:"auto"}},X={style:{width:"95%"}},Y={key:1,class:"col",style:{width:"100%"}},Z={key:0,class:"dot"},ee={class:"name"},te={key:0,style:{height:"5rem"}},le={__name:"Struct",props:{level:Number,parentKey:Number,struct:Array},emits:["on-updated"],setup(v,{emit:o}){const a=new A({workspace:{zh:"工作目录",en:"workspace directory"},port:{zh:"工作端口",en:"work port"},systemProxy:{zh:"设置为系统代理",en:"set as system proxy"},enabled:{zh:"是否启用",en:"enabled"},list:{zh:"域名列表",en:"domain list"},whiteList:{zh:"域名白名单",en:"domain white list"},blackList:{zh:"域名黑名单",en:"domain black list"},certificate:{zh:"CA证书",en:"CA certificate"},key:{zh:"私钥",en:"key"},cert:{zh:"证书",en:"certificate"}},!0);a.tlp.bind(a),a.tlf.bind(a);const m=a.tl.bind(a),h=o,s=w(v.level||0),y=(r=[],i)=>{r.push(i)},x=(r=[],i)=>{r.splice(i,1)};async function u(r){let{id:i,value:d,type:V}=r;V==="list"&&(d=(d||[]).filter(f=>!!f).join("&&")),await E({id:i,value:d}).then(f=>{h("on-updated")})}return(r,i)=>{const d=g("el-input"),V=g("el-input-number"),f=g("el-switch"),S=g("el-scrollbar");return t(),k(S,{style:{"border-radius":"0.6rem"}},{default:L(()=>[(t(!0),n(C,null,N(v.struct,(e,D)=>(t(),n("div",{class:"item row",key:v.parentKey+"-"+D},[e.type!=="obj"?(t(),n("div",P,[s.value!==0?(t(),n("span",G)):b("",!0),c("span",H,p(U(m)(e.key)),1),c("div",J,[e.type==="str"?(t(),k(d,{key:0,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,size:"small",onChange:l=>u(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])):e.type==="num"?(t(),k(V,{key:1,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,size:"small",onChange:l=>u(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])):e.type==="bool"?(t(),k(f,{key:2,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,size:"small",onChange:l=>u(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])):e.type==="list"?(t(),n("div",Q,[c("div",R,[_(d,{modelValue:e.value.input,"onUpdate:modelValue":l=>e.value.input=l,size:"small",style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"]),_(B,{name:"new",size:"1",color:"#6dfcfc",onClick:l=>{y(e.value,e.value.input),u(e)},style:{margin:"auto"}},null,8,["onClick"])]),_(S,{style:{height:"auto"}},{default:L(()=>[(t(!0),n(C,null,N(e.value,(l,$)=>(t(),n("div",T,[c("span",W,p($+1),1),c("span",X,p(l),1),_(B,{name:"sub",size:"1",color:"#f15555",onClick:ie=>{x(e.value,$),u(e)},style:{margin:"auto 0.2rem auto auto"}},null,8,["onClick"])]))),256))]),_:2},1024)])):b("",!0)])])):(t(),n("div",Y,[s.value!==0?(t(),n("span",Z)):b("",!0),c("span",ee,p(U(m)(e.key)),1),_(I,{level:(s.value||0)+1,struct:e.value,class:"subSetting",onOnUpdated:i[0]||(i[0]=()=>{h("on-updated")}),style:O(`transform: scale(${1-((s.value||0)+1)*.1})`)},null,8,["level","struct","style"])]))]))),128)),s.value===0?(t(),n("div",te)):b("",!0)]),_:1})}}},I=j(le,[["__scopeId","data-v-cbdec80e"]]);const ne={id:"set-head",class:"row"},oe={style:{color:"whitesmoke","font-weight":"bolder","font-size":"1.3rem",margin:"0 auto"}},ae={name:"Setting"},se=Object.assign(ae,{setup(v){const o=new A({setting:{zh:"系统设置",en:"system setting"}},!0);o.tlp.bind(o),o.tlf.bind(o);const a=o.tl.bind(o),m=w([]),h=w(0),z=w(!1);F(()=>{s()});function s(){z.value=!0,M().then(y=>{m.value=y,h.value++}).finally(()=>{z.value=!1})}return(y,x)=>{const u=q("loading");return t(),n(C,null,[c("div",ne,[c("span",oe,p(U(a)("setting")),1)]),K(_(I,{struct:m.value,onOnUpdated:s},null,8,["struct"]),[[u]])],64)}}}),me=j(se,[["__scopeId","data-v-ac3da765"]]);export{me as default};

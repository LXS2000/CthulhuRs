import{_ as j}from"./SvgIcon.js";import{I as z}from"./IconBtn.js";import{s as D,f as E}from"./api.js";import{_ as S,j as v,o as $,d as H,t as n,y as M,i as N,c as x,v as A,z as L,k as V,w as f,x as O,r as b,A as R,e,f as o,g as d,m as u,B as q,D as g,p as F,h as G}from"../assets/index.js";import{L as J}from"./local.js";const K={__name:"TextBtn",props:{name:String,color:String,size:String|Number},setup(p){const l=v(!1),_=p,a={"font-size":_.size.type===String?_.size:_.size+"px",color:_.color,"font-weight":"bold"};return(m,c)=>($(),H("div",{class:M(l.value?"hover":""),onMouseover:c[0]||(c[0]=h=>l.value=!0),onMouseleave:c[1]||(c[1]=h=>l.value=!1),style:a},n(p.name),35))}},P=S(K,[["__scopeId","data-v-bff0d795"]]);const k=p=>(F("data-v-298ee2e2"),p=p(),G(),p),Q={class:"col-between card"},U={style:{color:"white"}},W={class:"row"},X={style:{color:"white","margin-left":"0.1rem"}},Y={class:"row",style:{"align-items":"center","margin-left":"auto"}},Z={class:"col card"},ee={style:{color:"white","margin-left":"0.1rem"}},te={style:{"margin-left":"1rem"}},oe={class:"row",style:{"align-items":"center","justify-content":"space-between"}},se=k(()=>e("span",{style:{color:"white"}}," http：",-1)),ne={class:"row",style:{"align-items":"center"}},le={style:{"font-size":"0.6rem",color:"white","margin-left":"0.5rem"}},ae={class:"row",style:{"align-items":"center","justify-content":"space-between"}},re=k(()=>e("span",{style:{color:"white"}}," tcp：",-1)),ie={class:"row",style:{"align-items":"center"}},ce={style:{"font-size":"0.6rem",color:"white","margin-left":"0.5rem"}},de={id:"clients",class:"col card"},pe={style:{color:"white","font-weight":"bold","margin-bottom":"0.5rem"}},_e={__name:"Home",setup(p){const l=new J({reboot:{zh:"重启",en:"reboot"},rebooting:{zh:"重启中",en:"rebooting"},running:{zh:"运行中",en:"running"},pAddr:{zh:"代理地址",en:"proxy address"},clients:{zh:"连接中的客户端",en:"connecting clients"},notSpt:{zh:"浏览器粘贴板不支持",en:"browser clipboard not supported"},copyTo:{zh:"内容已复制到粘贴板",en:"content copied to the clipboard"},cf:{zh:"复制失败",en:"copy failed"}},!0),_=l.tlp.bind(l);l.tlf.bind(l);const a=l.tl.bind(l);O("winSize");const m=N({addr:"127.0.0.1",port:3e3,scopes:[],email:"",integrals:0});v([]);const c=v(!1);let h=x(()=>{let{addr:s,port:t}=m;return`http://${s}:${t}`}),w=x(()=>{let{addr:s,port:t}=m;return`${s}:${t}`});A(async()=>{c.value=!0,await D().then(s=>{Object.keys(s||{}).forEach(t=>m[t]=s[t])}),c.value=!1});async function B(){let s=q.service({fullscreen:!0,text:_("{rebooting}...")});try{await E()}catch{}s.close()}function y(s){if(!navigator.clipboard){g.error(a("notSpt"));return}navigator.clipboard.writeText(s).then(t=>{g.success(a("copyTo"))}).catch(t=>{console.log(t),g.error(a("cf"))})}return(s,t)=>{const r=b("el-table-column"),I=b("el-table"),C=b("el-scrollbar"),T=R("loading");return L(($(),V(C,{height:"100%",id:"home-wrap",class:"col","element-loading-background":"rgba(122, 122, 122, 0.3)"},{default:f(()=>[e("div",Q,[e("div",U,n(m.email),1),e("div",W,[o(j,{name:"yes",color:"#87e861",size:"1.2"}),e("span",X,n(d(a)("running")),1),e("div",Y,[o(P,{name:d(a)("reboot"),size:"0.7rem",color:"#f87373",style:{"margin-left":"0.5rem"},onClick:B},null,8,["name"])])])]),e("div",Z,[e("div",ee,n(d(a)("pAddr"))+"：",1),e("div",te,[e("div",oe,[se,e("div",ne,[e("span",le,n(d(h)),1),o(z,{size:1,name:"copy",color:"#66cff5",style:{"margin-left":"0.2rem"},onClick:t[0]||(t[0]=i=>y(d(h)))})])]),e("div",ae,[re,e("div",ie,[e("span",ce,n(d(w)),1),o(z,{size:1,name:"copy",color:"#66cff5",style:{"margin-left":"0.2rem"},onClick:t[1]||(t[1]=i=>y(d(w)))})])])])]),e("div",de,[e("div",pe,n(d(a)("clients"))+":",1),o(I,{data:m.scopes,style:{height:"96%",width:"100%","margin-bottom":"auto"},"header-cell-style":{backgroundColor:"#181818",color:"#6b6b6b"}},{default:f(()=>[o(r,{fixed:"left",prop:"id",label:"id",width:"180"}),o(r,{prop:"ip",label:"ip",width:"100"}),o(r,{prop:"scheme",label:"scheme",width:"100"}),o(r,{prop:"host",label:"host",width:"180"}),o(r,{prop:"ua",label:"ua",width:"300"}),o(r,{prop:"email",label:"email",width:"100"},{default:f(i=>[u(n(i.row.email||"-"),1)]),_:1}),o(r,{prop:"tab",label:"tab",width:"100"},{default:f(i=>[u(n(i.row.tab||"-"),1)]),_:1}),o(r,{prop:"frame",label:"frame",width:"100"},{default:f(i=>[u(n(i.row.frame||"-"),1)]),_:1}),o(r,{prop:"custom",label:"custom",width:"180"},{default:f(i=>[u(n(i.row.custom||"-"),1)]),_:1})]),_:1},8,["data"])])]),_:1})),[[T,c.value]])}}},ge=S(_e,[["__scopeId","data-v-298ee2e2"]]);export{ge as default};

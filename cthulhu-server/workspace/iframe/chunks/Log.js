import{_ as N,i as c,b as P,u as S,c as E,p as F,q as M,r as d,o as s,d as n,e as r,f as e,w as y,g as p,F as T,k as q,m as w,t as b,n as D}from"../assets/index.js";import{p as H,c as R}from"./api.js";import{I as U}from"./IconBtn.js";import{L as $}from"./local.js";import"./SvgIcon.js";const j={class:"col",style:{width:"98%",height:"100%",margin:"0 auto"}},A={class:"row-between",style:{height:"40px",width:"100%"}},G={class:"row",style:{width:"10%","align-items":"center",margin:"auto"}},J={class:"col fill",style:{"border-radius":"0.3rem"}},K={class:"loadMore row"},O={class:"row",style:{margin:"auto"}},Q={key:0,class:"rotate"},W={key:2,style:{margin:"auto"}},X={__name:"Log",setup(Y){const l=new $({clear:{zh:"清空日志",en:"clear logs"},load:{zh:"点击加载",en:"click to load"},no:{zh:"没有日志",en:"no logs"}},!0);l.tlp.bind(l),l.tlf.bind(l);const g=l.tl.bind(l),k=c(null),f=c(!1),h=c(!1),i=c("info"),L=P();let _=S();const u=c([]);let x=E(()=>_.state.windowHeight-60);F(i,(a,t)=>{u.value=[],m()}),M(()=>{if(!_.state.curPlugin.id){L.push("/");return}m()});function m(){let a=_.state.curPlugin.id;f.value=!0;let t=300;H({id:a,level:i.value,index:u.value.length}).then(o=>{if(!o.length){h.value=!0;return}setTimeout(()=>{u.value.push(...o)},t)}).finally(()=>{setTimeout(()=>{f.value=!1},t)})}function V(){let a=_.state.curPlugin.id;u.value=[],R({id:a,level:i.value}).then(m)}return(a,t)=>{const o=d("el-radio-button"),z=d("el-radio-group"),C=d("Loading"),B=d("el-icon"),I=d("el-scrollbar");return s(),n("div",j,[r("div",A,[e(z,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=v=>i.value=v),size:"small",style:{width:"90%",margin:"1% auto"}},{default:y(()=>[e(o,{name:"info",label:"info"}),e(o,{name:"debug",label:"debug"}),e(o,{name:"error",label:"error"}),e(o,{name:"warn",label:"warn"})]),_:1},8,["modelValue"]),r("div",G,[e(U,{style:{margin:"auto"},size:1.5,name:"clear",color:"#f6dd65",onClick:V,prompt:p(g)("clear")},null,8,["prompt"])])]),e(I,{ref_key:"scroller",ref:k,always:"",id:"wrap",style:D(`height:${p(x)}px`),class:"logView"},{default:y(()=>[r("div",J,[(s(!0),n(T,null,q(u.value,v=>(s(),n("span",null,b(v),1))),256)),r("div",K,[r("div",O,[f.value?(s(),n("span",Q,[e(B,null,{default:y(()=>[e(C)]),_:1})])):w("",!0),h.value?w("",!0):(s(),n("span",{key:1,onClick:m,style:{margin:"auto"}},b(p(g)("load")),1)),h.value?(s(),n("span",W,b(p(g)("no")),1)):w("",!0)])])]),t[1]||(t[1]=r("div",{style:{height:"3rem"}},null,-1))]),_:1},8,["style"])])}}},ae=N(X,[["__scopeId","data-v-1106b1f9"]]);export{ae as default};

import{I as g}from"./IconBtn.js";import{_ as L,b as z,u as V,i as f,c as $,C as v,r as k,o as m,d as y,e as n,t as b,f as d,g as p,j as D,m as C,n as N,E as M,q as O,w as U,F as j,k as q}from"../assets/index.js";import{b as G,d as R,r as T,e as A,g as J}from"./api.js";import{L as B}from"./local.js";import"./SvgIcon.js";const K="https://web.cthulhu.server/iframe/assets/logo.png";const Q={class:"col",style:{height:"100%",width:"100%"}},X={class:"row head"},Y=["src"],Z={class:"name"},ee={class:"version"},te={class:"row",style:{height:"80%"}},ne={class:"col",style:{width:"90%"}},oe={class:"intro row"},ie={class:"row-between"},le={class:"id"},se={class:"col-between",style:{width:"10%",height:"90%","margin-top":"auto"}},re={class:"row-between",style:{height:"20%","margin-top":"auto","align-items":"center"}},ae={key:0,class:"row-between",style:{width:"60%",margin:"auto"}},ue={__name:"Plugin",props:{plugin:{}},emits:["onDelete"],setup(t,{emit:s}){const r=new B({whetherDel:{zh:"是否删除此插件？",en:"Do you want to delete this plugin？"}}),i=r.tlp.bind(r);r.tlf.bind(r),r.tl.bind(r);const a=t,_=s,l=z();let u=V();f("");const h=f(window.innerWidth/window.innerHeight),P=$(()=>({margin:h.value<=v.ratio?"0.2rem auto":"0.2rem 0",width:h.value<=v.ratio?"90%":"45%"})),w=$(()=>a.plugin.logoPath?a.plugin.logoPath.toString().startsWith("http")?a.plugin.logoPath:G(a.plugin.id,a.plugin.logoPath):K),H=o=>{if(u.commit("curPlugin",o),window.innerWidth/window.innerHeight<v.ratio){l.push("/sub/log");return}l.push("/index/sub/log")},I=o=>{if(u.commit("curPlugin",o),window.innerWidth/window.innerHeight<v.ratio){l.push("/sub/func");return}l.push("/index/sub/func")},W=o=>{if(u.commit("curPlugin",o),window.innerWidth/window.innerHeight<v.ratio){l.push("/sub/store");return}l.push("/index/sub/store")};function S(o){M.alert(i("{whetherDel}？"),i("{warning}"),{confirmButtonText:i("{sure}")}).then(e=>R({id:o}).then(x=>{_("onDelete",o)}))}function E(o){return T({id:o})}function F(o){return A({id:o})}return window.addEventListener("resize",()=>{h.value=window.innerWidth/window.innerHeight}),(o,e)=>{const x=k("el-switch");return m(),y("div",{class:"plugin col",style:N(P.value)},[n("div",Q,[n("div",X,[n("img",{src:w.value,alt:"logo",class:"logo"},null,8,Y),n("span",Z,b(t.plugin.name),1),n("span",ee,"Version："+b(t.plugin.version),1)]),n("div",te,[n("div",ne,[n("div",oe,b(t.plugin.intro),1),n("div",ie,[n("span",le,"ID："+b(t.plugin.id),1)])]),n("div",se,[d(g,{size:1.2,name:"flush",color:"#62da59",onClick:e[0]||(e[0]=c=>E(t.plugin.id)),prompt:p(i)("{reload}")},null,8,["prompt"]),d(g,{size:1.2,name:"delete",color:"#fc6868",onClick:e[1]||(e[1]=c=>S(t.plugin.id)),prompt:p(i)("{del}")},null,8,["prompt"])])]),n("div",re,[t.plugin.enable?(m(),y("div",ae,[t.plugin.webIndex?(m(),D(g,{key:0,size:1.2,name:"func",color:"#59a9da",onClick:e[2]||(e[2]=c=>I(t.plugin)),prompt:p(i)("{plugin} {func}")},null,8,["prompt"])):C("",!0),d(g,{size:1.2,name:"store",color:"#b058ef",onClick:e[3]||(e[3]=c=>W(t.plugin)),prompt:p(i)("{plugin} {stores}")},null,8,["prompt"]),d(g,{size:1.2,name:"log",color:"#d5d5d5",onClick:e[4]||(e[4]=c=>H(t.plugin)),prompt:p(i)("{plugin} {logs}")},null,8,["prompt"])])):C("",!0),d(x,{modelValue:t.plugin.enable,"onUpdate:modelValue":e[5]||(e[5]=c=>t.plugin.enable=c),onClick:e[6]||(e[6]=c=>F(t.plugin.id)),"active-value":1,style:{"margin-left":"auto"}},null,8,["modelValue"])])])],4)}}},de=L(ue,[["__scopeId","data-v-9ab74487"]]);const ce={class:"col",style:{width:"98%","margin-left":"1%",height:"100%"}},ge={id:"listHead",class:"row"},pe={id:"plugins"},me={__name:"List",setup(t){const s=new B({search:{zh:"输入关键字查询",en:"search with keyword"}},!0);s.tlp.bind(s),s.tlf.bind(s);const r=s.tl.bind(s);z(),V();const i=f(""),a=f([]);f(window.innerWidth/window.innerHeight),O(()=>{_()});function _(){J().then(l=>{a.value=l})}return(l,u)=>{const h=k("el-input"),P=k("el-scrollbar");return m(),y("div",ce,[n("div",ge,[d(h,{modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=w=>i.value=w),style:{width:"80%"},placeholder:p(r)("search")},null,8,["modelValue","placeholder"]),d(g,{size:1.2,name:"search",color:"#66cff5"})]),d(P,null,{default:U(()=>[n("div",pe,[(m(!0),y(j,null,q(a.value,w=>(m(),D(de,{plugin:w,onOnDelete:_},null,8,["plugin"]))),256))]),u[1]||(u[1]=n("div",{style:{height:"5rem"}},null,-1))]),_:1})])}}},be=L(me,[["__scopeId","data-v-1ee7acdf"]]);export{be as default};

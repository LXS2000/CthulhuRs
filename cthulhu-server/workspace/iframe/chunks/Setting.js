import{I as B}from"./IconBtn.js";import{_ as j,i as w,r as g,o as t,j as b,w as L,d as l,k as N,F as C,m as k,e as c,t as p,g as U,f as d,n as F,q as K}from"../assets/index.js";import{u as P,h as q}from"./api.js";import{L as I}from"./local.js";import"./SvgIcon.js";const D={key:0,class:"row",style:{width:"100%"}},E={key:0,class:"dot"},M={class:"name"},G={class:"val"},H={key:3,class:"col list"},J={class:"row",style:{"margin-bottom":"0.3rem"}},Q={class:"row list-item"},R={style:{width:"5%",color:"gray","font-size":"0.7rem",margin:"auto"}},T={style:{width:"95%"}},W={key:1,class:"col",style:{width:"100%"}},X={key:0,class:"dot"},Y={class:"name"},Z={key:0,style:{height:"5rem"}},ee={__name:"Struct",props:{level:Number,parentKey:Number,struct:Array},emits:["on-updated"],setup(h,{emit:o}){const a=new I({workspace:{zh:"工作目录",en:"workspace directory"},bgColor:{zh:"背景颜色",en:"background color"},dbPath:{zh:"数据库文件地址",en:"db file path"},port:{zh:"工作端口",en:"work port"},systemProxy:{zh:"设置为系统代理",en:"set as system proxy"},enabled:{zh:"是否启用",en:"enabled"},list:{zh:"域名列表",en:"domain list"},whiteList:{zh:"域名白名单",en:"domain white list"},blackList:{zh:"域名黑名单",en:"domain black list"},certificate:{zh:"CA证书",en:"CA certificate"},key:{zh:"私钥",en:"key"},cert:{zh:"证书",en:"certificate"}},!0);a.tlp.bind(a),a.tlf.bind(a);const _=a.tl.bind(a),y=o,s=w(h.level||0),v=(u=[],i)=>{u.push(i)},x=(u=[],i)=>{u.splice(i,1)};async function m(u){let{id:i,value:r,type:V}=u;V==="list"&&(r=(r||[]).filter(f=>!!f).join("&&")),await P({id:i,value:r}).then(f=>{y("on-updated")})}return(u,i)=>{const r=g("el-input"),V=g("el-input-number"),f=g("el-switch"),S=g("el-scrollbar");return t(),b(S,{style:{"border-radius":"0.6rem"}},{default:L(()=>[(t(!0),l(C,null,N(h.struct,(e,O)=>(t(),l("div",{class:"item row",key:h.parentKey+"-"+O},[e.type!=="obj"?(t(),l("div",D,[s.value!==0?(t(),l("span",E)):k("",!0),c("span",M,p(U(_)(e.key)),1),c("div",G,[e.type==="str"?(t(),b(r,{key:0,modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,size:"small",onChange:n=>m(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])):e.type==="num"?(t(),b(V,{key:1,modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,size:"small",onChange:n=>m(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])):e.type==="bool"?(t(),b(f,{key:2,modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,size:"small",onChange:n=>m(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])):e.type==="list"?(t(),l("div",H,[c("div",J,[d(r,{modelValue:e.value.input,"onUpdate:modelValue":n=>e.value.input=n,size:"small",style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"]),d(B,{name:"new",size:"1",color:"#6dfcfc",onClick:n=>{v(e.value,e.value.input),m(e)},style:{margin:"auto"}},null,8,["onClick"])]),d(S,{style:{height:"auto"}},{default:L(()=>[(t(!0),l(C,null,N(e.value,(n,$)=>(t(),l("div",Q,[c("span",R,p($+1),1),c("span",T,p(n),1),d(B,{name:"sub",size:"1",color:"#f15555",onClick:ae=>{x(e.value,$),m(e)},style:{margin:"auto 0.2rem auto auto"}},null,8,["onClick"])]))),256))]),_:2},1024)])):k("",!0)])])):(t(),l("div",W,[s.value!==0?(t(),l("span",X)):k("",!0),c("span",Y,p(U(_)(e.key)),1),d(A,{level:(s.value||0)+1,struct:e.value,class:"subSetting",onOnUpdated:i[0]||(i[0]=()=>{y("on-updated")}),style:F(`transform: scale(${1-((s.value||0)+1)*.1})`)},null,8,["level","struct","style"])]))]))),128)),s.value===0?(t(),l("div",Z)):k("",!0)]),_:1})}}},A=j(ee,[["__scopeId","data-v-77694bfc"]]);const te={id:"set-head",class:"row"},ne={style:{color:"whitesmoke","font-weight":"bolder","font-size":"1.3rem",margin:"0 auto"}},le={name:"Setting"},oe=Object.assign(le,{setup(h){const o=new I({setting:{zh:"系统设置",en:"system setting"}},!0);o.tlp.bind(o),o.tlf.bind(o);const a=o.tl.bind(o),_=w([]),y=w(0),z=w(!1);K(()=>{s()});function s(){z.value=!0,q().then(v=>{_.value=v,y.value++}).finally(()=>{z.value=!1})}return(v,x)=>(t(),l(C,null,[c("div",te,[c("span",ne,p(U(a)("setting")),1)]),d(A,{struct:_.value,onOnUpdated:s},null,8,["struct"])],64))}}),de=j(oe,[["__scopeId","data-v-8bf32d64"]]);export{de as default};

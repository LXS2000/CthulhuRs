import{_ as j}from"./SvgIcon.js";import{I as z}from"./IconBtn.js";import{s as I,f as E}from"./api.js";import{_ as $,i as v,o as k,d as H,t as n,v as M,h as N,c as x,q as A,x as D,j as L,w as _,s as V,r as b,y as q,e as t,f as o,g as d,l as u,z as O,A as g}from"../assets/index.js";import{L as R}from"./local.js";const F={__name:"TextBtn",props:{name:String,color:String,size:String|Number},setup(h){const l=v(!1),p=h,r={"font-size":p.size.type===String?p.size:p.size+"px",color:p.color,"font-weight":"bold"};return(m,c)=>(k(),H("div",{class:M(l.value?"hover":""),onMouseover:c[0]||(c[0]=f=>l.value=!0),onMouseleave:c[1]||(c[1]=f=>l.value=!1),style:r},n(h.name),35))}},G=$(F,[["__scopeId","data-v-bff0d795"]]);const J={class:"col-between card"},K={style:{color:"white"}},P={class:"row"},Q={style:{color:"white","margin-left":"0.1rem"}},U={class:"row",style:{"align-items":"center","margin-left":"auto"}},W={class:"col card"},X={style:{color:"white","margin-left":"0.1rem"}},Y={style:{"margin-left":"1rem"}},Z={class:"row",style:{"align-items":"center","justify-content":"space-between"}},ee={class:"row",style:{"align-items":"center"}},te={style:{"font-size":"0.6rem",color:"white","margin-left":"0.5rem"}},oe={class:"row",style:{"align-items":"center","justify-content":"space-between"}},se={class:"row",style:{"align-items":"center"}},ne={style:{"font-size":"0.6rem",color:"white","margin-left":"0.5rem"}},le={id:"clients",class:"col card"},re={style:{color:"white","font-weight":"bold","margin-bottom":"0.5rem"}},ae={__name:"Home",setup(h){const l=new R({reboot:{zh:"重启",en:"reboot"},rebooting:{zh:"重启中",en:"rebooting"},running:{zh:"运行中",en:"running"},pAddr:{zh:"代理地址",en:"proxy address"},clients:{zh:"连接中的客户端",en:"connecting clients"},notSpt:{zh:"浏览器粘贴板不支持",en:"browser clipboard not supported"},copyTo:{zh:"内容已复制到粘贴板",en:"content copied to the clipboard"},cf:{zh:"复制失败",en:"copy failed"}},!0),p=l.tlp.bind(l);l.tlf.bind(l);const r=l.tl.bind(l);V("winSize");const m=N({addr:"127.0.0.1",port:3e3,scopes:[],email:"",integrals:0});v([]);const c=v(!1);let f=x(()=>{let{addr:s,port:e}=m;return`http://${s}:${e}`}),w=x(()=>{let{addr:s,port:e}=m;return`${s}:${e}`});A(async()=>{c.value=!0,await I().then(s=>{Object.keys(s||{}).forEach(e=>m[e]=s[e])}),c.value=!1});async function B(){let s=O.service({fullscreen:!0,text:p("{rebooting}...")});try{await E()}catch{}s.close()}function y(s){if(!navigator.clipboard){g.error(r("notSpt"));return}navigator.clipboard.writeText(s).then(e=>{g.success(r("copyTo"))}).catch(e=>{console.log(e),g.error(r("cf"))})}return(s,e)=>{const a=b("el-table-column"),S=b("el-table"),C=b("el-scrollbar"),T=q("loading");return D((k(),L(C,{height:"100%",id:"home-wrap",class:"col","element-loading-background":"rgba(122, 122, 122, 0.3)"},{default:_(()=>[t("div",J,[t("div",K,n(m.email),1),t("div",P,[o(j,{name:"yes",color:"#87e861",size:"1.2"}),t("span",Q,n(d(r)("running")),1),t("div",U,[o(G,{name:d(r)("reboot"),size:"0.7rem",color:"#f87373",style:{"margin-left":"0.5rem"},onClick:B},null,8,["name"])])])]),t("div",W,[t("div",X,n(d(r)("pAddr"))+"：",1),t("div",Y,[t("div",Z,[e[2]||(e[2]=t("span",{style:{color:"white"}}," http：",-1)),t("div",ee,[t("span",te,n(d(f)),1),o(z,{size:1,name:"copy",color:"#66cff5",style:{"margin-left":"0.2rem"},onClick:e[0]||(e[0]=i=>y(d(f)))})])]),t("div",oe,[e[3]||(e[3]=t("span",{style:{color:"white"}}," tcp：",-1)),t("div",se,[t("span",ne,n(d(w)),1),o(z,{size:1,name:"copy",color:"#66cff5",style:{"margin-left":"0.2rem"},onClick:e[1]||(e[1]=i=>y(d(w)))})])])])]),t("div",le,[t("div",re,n(d(r)("clients"))+":",1),o(S,{data:m.scopes,style:{height:"96%",width:"100%","margin-bottom":"auto"},"header-cell-style":{backgroundColor:"#181818",color:"#6b6b6b"}},{default:_(()=>[o(a,{fixed:"left",prop:"id",label:"id",width:"180"}),o(a,{prop:"ip",label:"ip",width:"100"}),o(a,{prop:"scheme",label:"scheme",width:"100"}),o(a,{prop:"host",label:"host",width:"180"}),o(a,{prop:"ua",label:"ua",width:"300"}),o(a,{prop:"email",label:"email",width:"100"},{default:_(i=>[u(n(i.row.email||"-"),1)]),_:1}),o(a,{prop:"tab",label:"tab",width:"100"},{default:_(i=>[u(n(i.row.tab||"-"),1)]),_:1}),o(a,{prop:"frame",label:"frame",width:"100"},{default:_(i=>[u(n(i.row.frame||"-"),1)]),_:1}),o(a,{prop:"custom",label:"custom",width:"180"},{default:_(i=>[u(n(i.row.custom||"-"),1)]),_:1})]),_:1},8,["data"])])]),_:1})),[[T,c.value]])}}},_e=$(ae,[["__scopeId","data-v-298ee2e2"]]);export{_e as default};
